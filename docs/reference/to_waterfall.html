<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Make waterfall data tibble from a tibble of cash flows — to_waterfall • datools</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Make waterfall data tibble from a tibble of cash flows — to_waterfall" />
<meta property="og:description" content="The only requirement for this function to work is that the first row and last row of the tibble
represent the cash in and cash out. In other words the Base and the Total when talking about
sales modeling." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">datools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/DoktorMike/datools/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Make waterfall data tibble from a tibble of cash flows</h1>
    <small class="dont-index">Source: <a href='https://github.com/DoktorMike/datools/blob/master/R/waterfall.R'><code>R/waterfall.R</code></a></small>
    <div class="hidden name"><code>to_waterfall.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The only requirement for this function to work is that the first row and last row of the tibble
represent the cash in and cash out. In other words the Base and the Total when talking about
sales modeling.</p>
    </div>

    <pre class="usage"><span class='fu'>to_waterfall</span><span class='op'>(</span><span class='va'>data</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>the data tibble to operate on</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a new data tibble with columns necessary to create a waterfall visualization</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>datadf</span> <span class='op'>&lt;-</span>
  <span class='fu'>tibble</span><span class='fu'>::</span><span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span><span class='op'>(</span>
    desc <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
      <span class='st'>"starting_net_income"</span>,
      <span class='st'>"write_offs"</span>,
      <span class='st'>"sales"</span>,
      <span class='st'>"COGS"</span>,
      <span class='st'>"overhead"</span>,
      <span class='st'>"taxes"</span>,
      <span class='st'>"bonuses"</span>,
      <span class='st'>"other_income"</span>,
      <span class='st'>"ending_net_income"</span>
    <span class='op'>)</span>,
    amount <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1200</span>, <span class='op'>-</span><span class='fl'>2300</span>, <span class='fl'>11000</span>, <span class='op'>-</span><span class='fl'>9000</span>, <span class='op'>-</span><span class='fl'>1900</span>, <span class='op'>-</span><span class='fl'>1200</span>, <span class='op'>-</span><span class='fl'>3000</span>, <span class='fl'>7000</span>, <span class='fl'>1800</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='fu'>to_waterfall</span><span class='op'>(</span><span class='va'>datadf</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 9 x 6</span><span>
#&gt;      id desc                type  start   end amount
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;fct&gt;</span><span>               </span><span style='color: #949494;font-style: italic;'>&lt;fct&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>     1 starting_net_income net       0  </span><span style='text-decoration: underline;'>1</span><span>200   </span><span style='text-decoration: underline;'>1</span><span>200
#&gt; </span><span style='color: #BCBCBC;'>2</span><span>     2 write_offs          out    </span><span style='text-decoration: underline;'>1</span><span>200 -</span><span style='color: #BB0000;text-decoration: underline;'>1</span><span style='color: #BB0000;'>100</span><span>  -</span><span style='color: #BB0000;text-decoration: underline;'>2</span><span style='color: #BB0000;'>300</span><span>
#&gt; </span><span style='color: #BCBCBC;'>3</span><span>     3 sales               in    -</span><span style='color: #BB0000;text-decoration: underline;'>1</span><span style='color: #BB0000;'>100</span><span>  </span><span style='text-decoration: underline;'>9</span><span>900  </span><span style='text-decoration: underline;'>11</span><span>000
#&gt; </span><span style='color: #BCBCBC;'>4</span><span>     4 COGS                out    </span><span style='text-decoration: underline;'>9</span><span>900   900  -</span><span style='color: #BB0000;text-decoration: underline;'>9</span><span style='color: #BB0000;'>000</span><span>
#&gt; </span><span style='color: #BCBCBC;'>5</span><span>     5 overhead            out     900 -</span><span style='color: #BB0000;text-decoration: underline;'>1</span><span style='color: #BB0000;'>000</span><span>  -</span><span style='color: #BB0000;text-decoration: underline;'>1</span><span style='color: #BB0000;'>900</span><span>
#&gt; </span><span style='color: #BCBCBC;'>6</span><span>     6 taxes               out   -</span><span style='color: #BB0000;text-decoration: underline;'>1</span><span style='color: #BB0000;'>000</span><span> -</span><span style='color: #BB0000;text-decoration: underline;'>2</span><span style='color: #BB0000;'>200</span><span>  -</span><span style='color: #BB0000;text-decoration: underline;'>1</span><span style='color: #BB0000;'>200</span><span>
#&gt; </span><span style='color: #BCBCBC;'>7</span><span>     7 bonuses             out   -</span><span style='color: #BB0000;text-decoration: underline;'>2</span><span style='color: #BB0000;'>200</span><span> -</span><span style='color: #BB0000;text-decoration: underline;'>5</span><span style='color: #BB0000;'>200</span><span>  -</span><span style='color: #BB0000;text-decoration: underline;'>3</span><span style='color: #BB0000;'>000</span><span>
#&gt; </span><span style='color: #BCBCBC;'>8</span><span>     8 other_income        in    -</span><span style='color: #BB0000;text-decoration: underline;'>5</span><span style='color: #BB0000;'>200</span><span>  </span><span style='text-decoration: underline;'>1</span><span>800   </span><span style='text-decoration: underline;'>7</span><span>000
#&gt; </span><span style='color: #BCBCBC;'>9</span><span>     9 ending_net_income   net    </span><span style='text-decoration: underline;'>1</span><span>800     0   </span><span style='text-decoration: underline;'>1</span><span>800</div><div class='input'><span class='co'># Change order</span>
<span class='va'>datadf2</span> <span class='op'>&lt;-</span> <span class='fu'>to_waterfall</span><span class='op'>(</span><span class='va'>datadf</span><span class='op'>)</span>
<span class='va'>firstindex</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='va'>datadf</span><span class='op'>$</span><span class='va'>desc</span> <span class='op'>==</span> <span class='st'>"sales"</span><span class='op'>)</span>
<span class='va'>datadf2</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>firstindex</span>, <span class='fu'><a href='https://generics.r-lib.org/reference/setops.html'>setdiff</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_along</a></span><span class='op'>(</span><span class='va'>datadf</span><span class='op'>$</span><span class='va'>amount</span><span class='op'>)</span>, <span class='va'>firstindex</span><span class='op'>)</span><span class='op'>)</span>, <span class='op'>]</span>
</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 9 x 6</span><span>
#&gt;      id desc                type  start   end amount
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;fct&gt;</span><span>               </span><span style='color: #949494;font-style: italic;'>&lt;fct&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>     3 sales               in    -</span><span style='color: #BB0000;text-decoration: underline;'>1</span><span style='color: #BB0000;'>100</span><span>  </span><span style='text-decoration: underline;'>9</span><span>900  </span><span style='text-decoration: underline;'>11</span><span>000
#&gt; </span><span style='color: #BCBCBC;'>2</span><span>     1 starting_net_income net       0  </span><span style='text-decoration: underline;'>1</span><span>200   </span><span style='text-decoration: underline;'>1</span><span>200
#&gt; </span><span style='color: #BCBCBC;'>3</span><span>     2 write_offs          out    </span><span style='text-decoration: underline;'>1</span><span>200 -</span><span style='color: #BB0000;text-decoration: underline;'>1</span><span style='color: #BB0000;'>100</span><span>  -</span><span style='color: #BB0000;text-decoration: underline;'>2</span><span style='color: #BB0000;'>300</span><span>
#&gt; </span><span style='color: #BCBCBC;'>4</span><span>     4 COGS                out    </span><span style='text-decoration: underline;'>9</span><span>900   900  -</span><span style='color: #BB0000;text-decoration: underline;'>9</span><span style='color: #BB0000;'>000</span><span>
#&gt; </span><span style='color: #BCBCBC;'>5</span><span>     5 overhead            out     900 -</span><span style='color: #BB0000;text-decoration: underline;'>1</span><span style='color: #BB0000;'>000</span><span>  -</span><span style='color: #BB0000;text-decoration: underline;'>1</span><span style='color: #BB0000;'>900</span><span>
#&gt; </span><span style='color: #BCBCBC;'>6</span><span>     6 taxes               out   -</span><span style='color: #BB0000;text-decoration: underline;'>1</span><span style='color: #BB0000;'>000</span><span> -</span><span style='color: #BB0000;text-decoration: underline;'>2</span><span style='color: #BB0000;'>200</span><span>  -</span><span style='color: #BB0000;text-decoration: underline;'>1</span><span style='color: #BB0000;'>200</span><span>
#&gt; </span><span style='color: #BCBCBC;'>7</span><span>     7 bonuses             out   -</span><span style='color: #BB0000;text-decoration: underline;'>2</span><span style='color: #BB0000;'>200</span><span> -</span><span style='color: #BB0000;text-decoration: underline;'>5</span><span style='color: #BB0000;'>200</span><span>  -</span><span style='color: #BB0000;text-decoration: underline;'>3</span><span style='color: #BB0000;'>000</span><span>
#&gt; </span><span style='color: #BCBCBC;'>8</span><span>     8 other_income        in    -</span><span style='color: #BB0000;text-decoration: underline;'>5</span><span style='color: #BB0000;'>200</span><span>  </span><span style='text-decoration: underline;'>1</span><span>800   </span><span style='text-decoration: underline;'>7</span><span>000
#&gt; </span><span style='color: #BCBCBC;'>9</span><span>     9 ending_net_income   net    </span><span style='text-decoration: underline;'>1</span><span>800     0   </span><span style='text-decoration: underline;'>1</span><span>800</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Michael Green.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


